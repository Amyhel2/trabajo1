"use strict";(self["webpackChunkcoreclear_portal"]=self["webpackChunkcoreclear_portal"]||[]).push([[498],{3691:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B});var a=i(2202),s=i(7179),n=i(3385),r=i(5223),o=i(4437),l=i(9841),c=i(7345),u=i(9789),h=i(4192),d=i(5057),p=i(92),g=i(1302),f=i(5294),m=i(2927),v=i(5234),y=i(6660),k=i(5952),D=i(5838),C=i(2370),b=function(){var e=this,t=e._self._c;return t(f.Z,{staticClass:"justify-center"},[t(o.Z,{attrs:{cols:"12",md:"10"}},[t(a.Z,{attrs:{type:e.alertType,border:"left","close-text":"Close Alert",dismissible:"",transition:"scale-transition"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e._v(" "+e._s(e.alertMessage)+" ")]),t(u.Z,{attrs:{"hide-overlay":"",persistent:"",transition:"dialog-bottom-transition",width:"300"},model:{value:e.loadingActions,callback:function(t){e.loadingActions=t},expression:"loadingActions"}},[t(n.Z,{attrs:{color:e.getAppColors.primary,dark:""}},[t(r.ZB,[e._v(" Processing... "),t(g.Z,{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),t(l.Z,{directives:[{name:"show",rawName:"v-show",value:!e.loadingActions,expression:"!loadingActions"}],staticClass:"elevation-4 rounded-lg mt-2",attrs:{headers:e.headers,items:e.records,loading:e.loading,options:e.options,"server-items-length":e.totalRecords,"loading-text":"Loading... Please wait","footer-props":e.tableFooterProps,"sort-by":"depositDate","sort-desc":"","must-sort":""},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.depositDate",fn:function({item:t}){return[e._v(" "+e._s(e.formatDateTime(t.depositDate))+" ")]}},{key:"item.amount",fn:function({item:t}){return[e._v(" "+e._s(e._f("currency")(t.amount,t.offsetDescription))+" ")]}},{key:"item.offsetDescription",fn:function({item:t}){return[e._v(" "+e._s(e._f("titleCase")(t.offsetDescription))+" ")]}},{key:"top",fn:function(){return[t(D.Z,{staticClass:"rounded-t-lg",attrs:{color:"green darken-2",dark:"",flat:""}},[t(C.qW,[e._v("ACH Funding")]),t(h.Z,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t(k.Z,{attrs:{label:"Search","append-icon":"search","single-line":"","hide-details":"",clearable:"",dark:""},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.datepickerDateRange=[],e.initialize()},"click:append":function(t){e.datepickerDateRange=[],e.initialize()},"click:clear":function(t){return e.initialize()}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t(v.Z),t(C.qW,[e._v(" Transactions for "+e._s(e.dateRangeDisplay)+" ")]),t(h.Z,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t(p.Z,{attrs:{"close-on-content-click":!1,"offset-x":"",left:"","max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:a}){return[t(s.Z,e._g(e._b({attrs:{color:"primary",rounded:"",dark:""}},"v-btn",a,!1),i),[t(d.Z,[e._v("mdi-filter")])],1)]}}]),model:{value:e.filterMenu,callback:function(t){e.filterMenu=t},expression:"filterMenu"}},[t(n.Z,[t(r.EB,[e._v(" Filters")]),t(r.ZB,[t(f.Z,[t(o.Z,{attrs:{cols:"12"}},[t(m.Z,{attrs:{label:"Transaction Types",color:e.getAppColors.primary,"item-color":"green","append-icon":"mdi-filter",items:e.transactionTypes,multiple:"",chips:"","deletable-chips":""},on:{change:e.saveFilterPreferences},model:{value:e.filterTypes,callback:function(t){e.filterTypes=t},expression:"filterTypes"}})],1),t(o.Z,{attrs:{cols:"12"}},[e.useCustomDateRange?t(p.Z,{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:a}){return[t(k.Z,e._g(e._b({attrs:{label:"Choose Date Range",color:e.getAppColors.primary,"append-icon":"mdi-calendar",readonly:""},model:{value:e.dateRangeText,callback:function(t){e.dateRangeText=t},expression:"dateRangeText"}},"v-text-field",a,!1),i))]}}],null,!1,2310006902),model:{value:e.datePickerMenu,callback:function(t){e.datePickerMenu=t},expression:"datePickerMenu"}},[t(c.Z,{attrs:{color:e.getAppColors.primary,range:""},on:{change:function(t){e.search="",e.initialize()}},model:{value:e.datepickerDateRange,callback:function(t){e.datepickerDateRange=t},expression:"\n                                                    datepickerDateRange\n                                                "}})],1):t(m.Z,{attrs:{color:e.getAppColors.primary,items:e.getBlockchypDateRangeChoices,"item-color":"green","single-line":"","hide-details":"","return-object":""},on:{change:e.initialize},model:{value:e.quickDateRange,callback:function(t){e.quickDateRange=t},expression:"quickDateRange"}})],1),t(o.Z,{attrs:{cols:"6"}},[t(y.Z,{attrs:{color:"green",label:"Custom Date Range"},model:{value:e.useCustomDateRange,callback:function(t){e.useCustomDateRange=t},expression:"useCustomDateRange"}})],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"no-data",fn:function(){return[t(a.Z,{staticClass:"ma-2",attrs:{prominent:"",text:"",type:"info"}},[t(f.Z,{attrs:{align:"center"}},[t(o.Z,{staticClass:"grow"},[e._v(" No records found")]),t(o.Z,{staticClass:"shrink"},[t(s.Z,{staticClass:"my-2 white--text",attrs:{color:"green"},on:{click:e.initialize}},[e._v(" Retry ")])],1)],1)],1)]},proxy:!0}],null,!0)})],1)],1)},x=[],R=(i(6699),i(743)),_=i.n(R),w=i(9669),Z=i.n(w),S=i(381),A=i.n(S),T=i(629),M={name:"AchFundingList",data(){return{datePickerMenu:!1,loading:!1,alert:!1,alertMessage:"",alertType:"success",search:"",filterMenu:!1,filterTypes:["Deposits","Discount"],transactionTypes:["Deposits","Discount"],tableFooterProps:{showFirstLastPage:!0},headers:[{text:"Deposit Date",align:"left",value:"depositDate"},{text:"Amount",align:"right",value:"amount"},{text:"Location",align:"right",value:"locationName"},{text:"Type",align:"center",value:"offsetDescription",filter:(e,t,i)=>{if(!this.filterTypes.length)return!0;if(!i.offsetDescription)return!1;const a=this.filterTypes.map((e=>e.toUpperCase()));return a.includes(i.offsetDescription.toUpperCase())}},{text:"Bank",align:"left",value:"bankName"},{text:"Routing",align:"left",value:"bankRouting"},{text:"Bank Account",align:"left",value:"bankAccountNumber.mask"},{text:"Reference",align:"left",value:"referenceNumber"}],options:{},records:[],totalRecords:0,useCustomDateRange:!1,datepickerDateRange:[],quickDateRange:{text:"Yesterday",value:"yesterday",useForBlockchyp:!0,days:null},loadingActions:!1,axiosSource:null}},watch:{useCustomDateRange:function(e){e||(this.datepickerDateRange=[],this.initialize())},options:{handler(){this.initialize()},deep:!0}},computed:{...(0,T.Se)(["getAppColors","getInternalMxController","getInternalEmployeePreferencesController","getBlockchypDateRangeChoices"]),dateRangeText(){return this.datepickerDateRange.map((e=>A()(e).format("MM/DD/YYYY"))).join(" through ")},getTotal(){const e=this.filterTypes.map((e=>e.toUpperCase()));let t=0;return this.records.forEach((i=>{this.filterTypes.length&&!e.includes(i.offsetDescription.toUpperCase())||(t+=i.amount)})),_().formatMoney(t)},dateRange(){let e=null,t=null,i=null,a=null;if(this.quickDateRange!=={}){switch(this.quickDateRange.value){case"today":e=0,t=0;break;case"yesterday":e=1,t=1;break;default:e=this.quickDateRange.days,t=0}i=A()().subtract(e,"days"),a=A()().subtract(t,"days")}let s=void 0!==this.datepickerDateRange[0]?this.datepickerDateRange[0]:null!==i?i:"",n=void 0!==this.datepickerDateRange[1]?this.datepickerDateRange[1]:null!==a?a:"";return""!==s&&(s=A()(s).set({hour:0,minute:0,second:0,millisecond:0}).toISOString()),""!==n&&(n=A()(n).set({hour:23,minute:59,second:59,millisecond:999}).toISOString()),{startDate:s,endDate:n}},dateRangeDisplay(){return this.dateRangeText?this.dateRangeText:this.quickDateRange.text}},mounted(){this.getFilterPreferences()},methods:{openAlert(e,t){this.alertType=e,this.alertMessage=t,this.alert=!0},async initialize(){this.loading=!0,this.alert=!1;const{sortBy:e,sortDesc:t,page:i,itemsPerPage:a}=this.options,s=(i-1)*a;let n=!1;const r=1===e.length?e[0]:null,o=1===t.length?t[0]:null;r&&(n=r,o&&(n+=":desc")),console.log(n);try{this.axiosSource&&this.axiosSource.cancel(),this.axiosSource=Z().CancelToken.source();let e=await Z().get(""+(this.getInternalMxController+"/get_ach_funding"),{withCredentials:!0,crossDomain:!0,params:{start_date:this.dateRange.startDate,end_date:this.dateRange.endDate,sort:n,limit:a,offset:s},cancelToken:this.axiosSource.token});this.loading=!1,this.axiosSource=null,e.data.warning?this.openAlert("info",e.data.message):e.data.data.totalRecords>0?(this.records=e.data.data.records,this.totalRecords=e.data.data.totalRecords):(console.log("No ach fundings found"),this.records=[],this.totalRecords=0)}catch(l){console.error("Could not get list of ach fundings"),console.error(l),"Cancel"==!l.toString()&&this.openAlert("error",l.toString()),this.loading=!1,this.axiosSource=null,this.records=[]}},formatDateTime(e){return e?A()(e).format("MM/DD/YYYY LT"):""},formatDate(e){return e?A()(e).format("MM/DD/YYYY"):""},async saveFilterPreferences(){let e=new FormData;e.append("ach_funding_filters",JSON.stringify(this.filterTypes));try{let t=await Z().post(""+(this.getInternalEmployeePreferencesController+"/save_ach_funding_filters"),e,{withCredentials:!0,crossDomain:!0});200===t.status?console.log("Filter preferences updated"):console.log("Unable to save filter preferences")}catch(t){console.error(t)}},async getFilterPreferences(){try{let e=await Z().get(""+(this.getInternalEmployeePreferencesController+"/get_ach_funding_filters"),{withCredentials:!0,crossDomain:!0,params:{}});e.data?this.filterTypes=e.data:(console.log("No filter preferences found"),this.filterTypes=["Deposits","Discount"])}catch(e){console.error("Could not get filter preferences"),console.error(e)}}},filters:{titleCase:e=>{if(!e)return"";e=e.toString().toLowerCase().split(" ");for(let t=0;t<e.length;t++)e[t]=e[t][0].toUpperCase()+e[t].slice(1);return e.join(" ")},currency:(e,t)=>{if(!e)return"0";let i=_().formatMoney(e);return"void"===t||"refund"===t||"reverse"===t?"-"+i:i}}},P=M,V=i(1001),F=(0,V.Z)(P,b,x,!1,null,null,null),B=F.exports},565:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var a=i(6035),s=function(){var e=this,t=e._self._c;return t(a.Z,{staticClass:"py-10",attrs:{fluid:""}},[t("router-view")],1)},n=[],r={name:"AchFundingScreen"},o=r,l=i(1001),c=(0,l.Z)(o,s,n,!1,null,null,null),u=c.exports},6660:(e,t,i)=>{i.d(t,{Z:()=>c});i(7393);var a=i(1465),s=i(3316),n=i(3134),r=i(3422),o=i(6275),l=i(1050),c=a.Z.extend({name:"v-switch",directives:{Touch:n.Z},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes(){return{...s.Z.options.computed.classes.call(this),"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset}},attrs(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot(){return[this.genSwitch(),this.genLabel()]},genSwitch(){const{title:e,...t}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",{...this.attrs,...t}),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",{staticClass:"v-input--switch__track",...this.switchData}),this.$createElement("div",{staticClass:"v-input--switch__thumb",...this.switchData},[this.genProgress()])])},genProgress(){return this.$createElement(r.b0,{},[!1===this.loading?null:this.$slots.progress||this.$createElement(o.Z,{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft(){this.isActive&&this.onChange()},onSwipeRight(){this.isActive||this.onChange()},onKeydown(e){(e.keyCode===l.Do.left&&this.isActive||e.keyCode===l.Do.right&&!this.isActive)&&this.onChange()}}})},1465:(e,t,i)=>{i.d(t,{Z:()=>u});i(7658);var a=i(3316),s=i(3176),n=i(144),r=n.ZP.extend({name:"rippleable",directives:{ripple:s.Z},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(e={}){return this.ripple?(e.staticClass="v-input--selection-controls__ripple",e.directives=e.directives||[],e.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",e)):null}}}),o=i(564),l=i(4987);function c(e){e.preventDefault()}var u=(0,l.Z)(a.Z,r,o.Z).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const e=this.value,t=this.internalValue;return this.isMultiple?!!Array.isArray(t)&&t.some((t=>this.valueComparator(t,e))):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,t):Boolean(t):this.valueComparator(t,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(e){this.lazyValue=e,this.hasColor=e}},methods:{genLabel(){const e=a.Z.options.methods.genLabel.call(this);return e?(e.data.on={click:c},e):e},genInput(e,t){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:e,type:e},t),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:c},ref:"input"})},onClick(e){this.onChange(),this.$emit("click",e)},onChange(){if(!this.isInteractive)return;const e=this.value;let t=this.internalValue;if(this.isMultiple){Array.isArray(t)||(t=[]);const i=t.length;t=t.filter((t=>!this.valueComparator(t,e))),t.length===i&&t.push(e)}else t=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(t,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(t,e)?null:e:!t;this.validate(!0,t),this.internalValue=t,this.hasColor=t},onFocus(e){this.isFocused=!0,this.$emit("focus",e)},onBlur(e){this.isFocused=!1,this.$emit("blur",e)},onKeydown(e){}}})},7393:()=>{}}]);
//# sourceMappingURL=ach-funding.44dd4e7b.js.map